<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{{ theme.getThemeConfig("theme_title") }}</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="token" content="{{ csrfToken }}"/>
        <link rel="shortcut icon" href="{{ theme.uri("img/favicon.ico") }}" />

        <link href="{{ theme.uri("libraries/bootstrap/css/bootstrap.min.css") }}" rel="stylesheet" media="screen">
        <!--  <link href="{{ theme.uri("libraries/bootstrap/css/bootstrap-theme.min.css") }}" rel="stylesheet" media="screen">-->
        <link href="{{ theme.uri("libraries/font-awesome/css/font-awesome.min.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/bootstrap-select/css/bootstrap-select.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/bootstrap-ekko-lightbox/ekko-lightbox.min.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/bootstrap-switch/bootstrap-switch.min.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/calendar/css/calendar.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/morrisjs/morris.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/datatables/dataTables.bootstrap.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/datatables/buttons.dataTables.min.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/jquery/jquery-ui/css/ui-lightness/jquery-ui-1.10.2.custom.min.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/jquery-file-upload/css/jquery.fileupload.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/jquery-file-upload/css/jquery.fileupload-ui.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("libraries/toastr/toastr.min.css") }}" rel="stylesheet">
        <link href="{{ theme.uri("css/dashboard.css") }}" rel="stylesheet" media="screen">
        <link href="{{ theme.uri("css/timeline.css") }}" rel="stylesheet" media="screen">
        <link href="{{ theme.uri("css/calendar.css") }}" rel="stylesheet" media="screen">
        <link href="{{ theme.uri("css/xibo.css") }}" rel="stylesheet" media="screen">
        <link href="{{ theme.uri("css/override.css") }}" rel="stylesheet" media="screen">
        <link href="{{ urlFor("library.font.css") }}" rel="stylesheet">
        <!-- Copyright 2006-2016 Daniel Garner. Part of the Xibo Open Source Digital Signage Solution. Released under the AGPLv3 or later. -->
        <!-- Please be sure you read this before removing the Source/About links from your theme: http://bit.ly/agplv3 -->
        {% block headContent %}{% endblock %}
    </head>
    <body>
        {% block content %}{% endblock %}

        <script src="{{ theme.uri("libraries/jquery/jquery-1.11.1.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery/jquery.validate.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery/additional-methods.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/bootstrap/js/bootstrap.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/bootstrap/js/bootbox.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/bootstrap-switch/bootstrap-switch.min.js") }}"></script>

        {# Dates #}
        {% if settings.CALENDAR_TYPE == "Jalali" %}
        <script src="{{ theme.uri("libraries/bootstrap-datetimepicker/js/jalali-date.js") }}"></script>
        <script src="{{ theme.uri("libraries/bootstrap-datetimepicker/js/bootstrap-datetimepicker-jalali.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/calendar/js/calendar-jalali.js") }}"></script>
        {% else %}
        <script src="{{ theme.uri("libraries/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/calendar/js/calendar.js") }}"></script>
        <script src="{{ theme.uri("libraries/calendar/js/language/en_GB.js") }}"></script>
        {% endif %}

        {# Datatables #}
        <script src="{{ theme.uri("libraries/datatables/jquery.dataTables.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/datatables/dataTables.bootstrap.js") }}"></script>
        <script src="{{ theme.uri("libraries/datatables/dataTables.buttons.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/datatables/buttons.colVis.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/datatables/buttons.print.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/datatables/buttons.html5.js") }}"></script>
        <script src="{{ theme.uri("libraries/datatables/buttons.flash.min.js") }}"></script>

        <script src="{{ theme.uri("libraries/jquery/jquery-ui/jquery-ui-1.10.2.custom.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/bootstrap-select/js/bootstrap-select.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/bootstrap-ekko-lightbox/ekko-lightbox.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/underscore/underscore-min.js") }}"></script>
        <script src="{{ theme.uri("libraries/jstimezonedetect/jstz.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/ckeditor/ckeditor.js") }}"></script>
        <script src="{{ theme.uri("libraries/bootstrap/js/bootstrap-ckeditor-fix.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/tmpl.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-load-image/load-image.all.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.iframe-transport.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.fileupload.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.fileupload-process.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.fileupload-resize.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.fileupload-validate.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.fileupload-ui.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.fileupload-image.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.fileupload-video.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-file-upload/js/jquery.fileupload-audio.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-message-queuing/jquery.ba-jqmq.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-throttle-debounce/jquery.ba-throttle-debounce.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/toastr/toastr.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/date-time-format.js") }}"></script>
        <script src="{{ theme.uri("libraries/momentjs/moment.js") }}"></script>
        <script src="{{ theme.uri("libraries/morrisjs/raphael.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/morrisjs/morris.min.js") }}"></script>
        <script src="{{ theme.uri("libraries/colors/colors.min.js") }}"></script>
        <script src="{{ theme.uri("js/xibo-cms.js") }}"></script>
        <script src="{{ theme.uri("js/xibo-forms.js") }}"></script>
        <script src="{{ theme.uri("js/xibo-preview-timeline.js") }}"></script>
        <script src="{{ theme.uri("js/xibo-calendar.js") }}"></script>
        <script src="{{ theme.uri("js/xibo-datasets.js") }}"></script>
        <script src="{{ theme.uri("libraries/handlebars/handlebars-v3.0.0.js") }}"></script>
        <script src="{{ theme.uri("libraries/jquery-serialize-object/jquery.serialize-object.min.js") }}"></script>

        {% if translate.jsLocale != 'en-GB' %}
            {# Handle the inclusion of i18n #}
            {% set calendarTranslation %}libraries/calendar/js/language/{{ translate.calendarLanguage }}.js{% endset %}
            <script src="{{ theme.uri(calendarTranslation) }}"></script>
            {% set datePickerTranslation %}libraries/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.{{ translate.jsShortLocale }}.js{% endset %}
            <script src="{{ theme.uri(datePickerTranslation) }}"></script>
            {% set selectPickerTranslation %}libraries/bootstrap-select/js/i18n/defaults-{{ translate.boostrapSelectLanguage }}.min.js{% endset %}
            <script src="{{ theme.uri(selectPickerTranslation) }}"></script>
        {% endif %}

        <script type="text/javascript">
            var translations = {{ translations|raw }};
            // Translations we want always available
            translations.withselected = "{% trans "With Selected" %}";
            translations.multiselect = "{% trans "Multiple Items Selected" %}";
            translations.multiselectNoItemsMessage = "{% trans "Sorry, no items have been selected." %}";
            translations.multiselectMessage = "{% trans "Caution, you have selected %1 items. Clicking save will run the %2 transaction on all these items." %}";
            translations.save = "{% trans "Save" %}";
            translations.cancel = "{% trans "Cancel" %}";
            translations.close = "{% trans "Close" %}";
            translations.success = "{% trans "Success" %}";
            translations.failure = "{% trans "Failure" %}";
            translations.enterText = "{% trans "Enter text..." %}";

            var language = "{{ translate.jsLocale }}";
            var dateFormat = "{{ settings.DATE_FORMAT }}";
            var jsDateFormat = "{{ settings.DATE_FORMAT_JS }}";
            var bootstrapDateFormat = "{{ settings.DATE_FORMAT_BOOTSTRAP }}";
            var calendarType = "{{ settings.CALENDAR_TYPE }}";
            var clockUrl = "{{ urlFor("clock") }}";
            var calendarLanguage = "{{ translate.calendarLanguage }}";
            var pingUrl = "{{ urlFor("ping") }}";
            var dataTablesLanguage = {
                "decimal":        "",
                "emptyTable":     "{% trans "No data available in table" %}",
                "info":           "{% trans "Showing _START_ to _END_ of _TOTAL_ entries" %}",
                "infoEmpty":      "{% trans "Showing 0 to 0 of 0 entries" %}",
                "infoFiltered":   "{% trans "(filtered from _MAX_ total entries)" %}",
                "infoPostFix":    "",
                "thousands":      ",",
                "lengthMenu":     "{% trans "Show _MENU_ entries" %}",
                "loadingRecords": "{% trans "Loading..." %}",
                "processing":     "{% trans "Processing..." %}",
                "search":         "{% trans "Search:" %}",
                "zeroRecords":    "{% trans "No matching records found" %}",
                "paginate": {
                    "first":      "{% trans "First" %}",
                    "last":       "{% trans "Last" %}",
                    "next":       "{% trans "Next" %}",
                    "previous":   "{% trans "Previous" %}"
                },
                "aria": {
                    "sortAscending":  "{% trans ": activate to sort column ascending" %}",
                    "sortDescending": "{% trans ": activate to sort column descending" %}"
                }
            };

            moment.locale("{{ translate.jsLocale }}");

            $(function() {
                var csrf_token = $('meta[name="token"]').attr('content');
                $.ajaxSetup({
                    headers: {
                        'X-XSRF-TOKEN': csrf_token
                    }
                });
            });

            toastr.options.positionClass = "toast-bottom-right";

            // CKEditor default config
            var CKEDITOR_DEFAULT_CONFIG = {
                contentsCss: [ CKEDITOR.getUrl('contents.css'), "{{ urlFor("library.font.css") }}" ],
                font_names: '{{ ckeditorConfig }}' + CKEDITOR.config.font_names,
                imageDownloadUrl: "{{ urlFor("library.download") }}?preview=1"
            }

        </script>

        {% block javaScriptTemplates %}{% endblock %}
        {% block javaScript %}{% endblock %}
    </body>
</html>