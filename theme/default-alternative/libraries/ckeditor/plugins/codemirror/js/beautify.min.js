(function(){function r(p,b){return(new z(p,b)).beautify()}function z(p,b){var m,V,t,e,ba,w,r,Q,u,H,C,I,A,v,c,o,W,R;function ea(a,f){return{mode:f,last_text:a?a.last_text:"",last_word:a?a.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_array:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:a?a.indentation_level+(a.var_line&&a.var_line_reindented?1:0):0,ternary_depth:0}}function fa(a){for(a=void 0===
a?!1:a;n.length&&(" "===n[n.length-1]||n[n.length-1]===D||n[n.length-1]===S||a&&("\n"===n[n.length-1]||"\r"===n[n.length-1]));)n.pop()}function J(a){return a.replace(/^\s\s*|\s\s*$/,"")}function E(){return n.length&&"\n"===n[n.length-1]}function X(a){if(a=void 0===a?!1:a,m&&!a){var f="",d=0,c;a:{c=n.length-1;0>c&&(c+=n.length);c>n.length-1&&(c=n.length-1);for(c++;0<c--;)if(c in n&&"\n"===n[c])break a;c=-1}c+=1;c<n.length&&(f=n.slice(c).join(""),d=f.length+k.length+(h?1:0),d>=m&&(a=!0))}(V&&F||a)&&
!E()&&(g(!1,!0),T=!0,F=!1)}function g(d,f){if(T=!1,h=!1,!f&&";"!==a.last_text)for(;a.mode===v&&!a.if_block;)K();(a.mode===c&&(a.multiline_array=!0),n.length)&&(d||!E())&&n.push("\n")}function ca(d){if(void 0===d?d=1:"number"!=typeof d&&(d=d?1:0),""!==a.last_text)for(var f=0;f<d;f+=1)n.push(D)}function i(d){d=d||k;E()&&(t&&a.mode===c&&L.length?n.push(L.join("")+""):(S&&n.push(S),ca(a.indentation_level),ca(a.var_line&&a.var_line_reindented),ca(T)));T=!1;if(h&&n.length){var f=n[n.length-1];E()||" "===
f||f===D||n.push(" ")}h=!1;n.push(d)}function G(d){a?($.push(a),B=a):B=ea(null,d);a=ea(B,d)}function Y(a){return q(a,[o,W,R])}function K(){0<$.length&&(B=a,a=$.pop())}function z(){var d;"do"===a.last_text||"else"===a.last_text&&"if"!==k||"TK_END_EXPR"===j&&(B.mode===W||B.mode===R)?(X(),G(v),a.indentation_level+=1,d=(T=!1,!0)):d=!1;return d}function U(a){return q(a,"case return do if throw else".split(" "))}function q(a,d){for(var c=0;c<d.length;c+=1)if(d[c]===a)return!0;return!1}function ga(a){for(var f=
d,c=l.charAt(f);q(c,da)&&c!==a;){if(f++,f>=s)return!1;c=l.charAt(f)}return c===a}function ha(){var c,f,b,o,g;if(y=0,d>=s)return["","TK_EOF"];F=!1;L=[];f=l.charAt(d);for(d+=1;q(f,da);){if("\n"===f?(y+=1,L=[]):y&&(f===D?L.push(D):"\r"!==f&&L.push(" ")),d>=s)return["","TK_EOF"];f=l.charAt(d);d+=1}if(q(f,aa)){if(d<s)for(;q(l.charAt(d),aa)&&!(f+=l.charAt(d),d+=1,d===s););return d!==s&&f.match(/^[0-9]+[Ee]$/)&&("-"===l.charAt(d)||"+"===l.charAt(d))?(b=l.charAt(d),d+=1,o=ha(),f+=b+o[0],[f,"TK_WORD"]):"in"===
f?[f,"TK_OPERATOR"]:[f,"TK_WORD"]}if("("===f||"["===f)return[f,"TK_START_EXPR"];if(")"===f||"]"===f)return[f,"TK_END_EXPR"];if("{"===f)return[f,"TK_START_BLOCK"];if("}"===f)return[f,"TK_END_BLOCK"];if(";"===f)return[f,"TK_SEMICOLON"];if("/"===f){if(b="",o=!0,"*"===l.charAt(d)){if(d+=1,d<s)for(;d<s&&!("*"===l.charAt(d)&&l.charAt(d+1)&&"/"===l.charAt(d+1))&&!(f=l.charAt(d),b+=f,("\n"===f||"\r"===f)&&(o=!1),d+=1,d>=s););return d+=2,o&&0===y?["/*"+b+"*/","TK_INLINE_COMMENT"]:["/*"+b+"*/","TK_BLOCK_COMMENT"]}if("/"===
l.charAt(d)){for(b=f;"\r"!==l.charAt(d)&&"\n"!==l.charAt(d)&&!(b+=l.charAt(d),d+=1,d>=s););return[b,"TK_COMMENT"]}}if("'"===f||'"'===f||("/"===f||e&&"<"===f&&l.slice(d-1).match(/^<[a-zA-Z:0-9]+\s*([a-zA-Z:0-9]+="[^"]*"\s*)*\/?\s*>/))&&("TK_WORD"===j&&U(a.last_text)||"TK_END_EXPR"===j&&q(B.mode,[R,W])||q(j,"TK_COMMENT TK_START_EXPR TK_START_BLOCK TK_END_BLOCK TK_OPERATOR TK_EQUALS TK_EOF TK_SEMICOLON TK_COMMA".split(" ")))){b=f;var i=o=!1;if(c=f,d<s)if("/"===b)for(g=!1;o||g||l.charAt(d)!==b;){if(c+=
l.charAt(d),o?o=!1:(o="\\"===l.charAt(d),"["===l.charAt(d)?g=!0:"]"===l.charAt(d)&&(g=!1)),d+=1,d>=s)return[c,"TK_STRING"]}else if(e&&"<"===b){f=/<(\/?)([a-zA-Z:0-9]+)\s*([a-zA-Z:0-9]+="[^"]*"\s*)*(\/?)\s*>/g;o=l.slice(d-1);var h=f.exec(o);if(h&&0===h.index){b=h[2];for(c=0;h;){var i=!!h[1],k=!!h[h.length-1];if(h[2]!==b||k||(i?--c:++c),0>=c)break;h=f.exec(o)}return g=h?h.index+h[0].length:o.length,d+=g-1,[o.slice(0,g),"TK_STRING"]}}else for(;o||l.charAt(d)!==b;)if(c+=l.charAt(d),o?(("x"===l.charAt(d)||
"u"===l.charAt(d))&&(i=!0),o=!1):o="\\"===l.charAt(d),d+=1,d>=s)return[c,"TK_STRING"];d+=1;c+=b;if(i&&ba){a:{g=c;f=!1;o="";h=0;c="";for(i=0;f||h<g.length;)if(k=g.charAt(h),h++,f){if(f=!1,"x"===k)c=g.substr(h,2),h+=2;else if("u"===k)c=g.substr(h,4),h+=4;else{o+="\\"+k;continue}if(!c.match(/^[0123456789abcdefABCDEF]+$/))break a;if(i=parseInt(c,16),0<=i&&32>i)o+="x"===k?"\\x"+c:"\\u"+c;else if(34===i||39===i||92===i)o+="\\"+String.fromCharCode(i);else{if("x"===k&&126<i&&255>=i)break a;o+=String.fromCharCode(i)}}else"\\"===
k?f=!0:o+=k;g=o}c=g}if("/"===b)for(;d<s&&q(l.charAt(d),aa);)c+=l.charAt(d),d+=1;return[c,"TK_STRING"]}if("#"===f){if(0===n.length&&"!"===l.charAt(d)){for(c=f;d<s&&"\n"!==f;)f=l.charAt(d),c+=f,d+=1;return[J(c)+"\n","TK_UNKNOWN"]}if(b="#",d<s&&q(l.charAt(d),ia)){do f=l.charAt(d),b+=f,d+=1;while(d<s&&"#"!==f&&"="!==f);return"#"===f||("["===l.charAt(d)&&"]"===l.charAt(d+1)?(b+="[]",d+=2):"{"===l.charAt(d)&&"}"===l.charAt(d+1)&&(b+="{}",d+=2)),[b,"TK_WORD"]}}if("<"===f&&"<\!--"===l.substring(d-1,d+3)){d+=
3;for(f="<\!--";"\n"!==l.charAt(d)&&d<s;)f+=l.charAt(d),d++;return a.in_html_comment=!0,[f,"TK_COMMENT"]}if("-"===f&&a.in_html_comment&&"--\>"===l.substring(d-1,d+2))return a.in_html_comment=!1,d+=2,["--\>","TK_COMMENT"];if("."===f)return[f,"TK_DOT"];if(q(f,M)){for(;d<s&&q(f+l.charAt(d),M)&&!(f+=l.charAt(d),d+=1,d>=s););return","===f?[f,"TK_COMMA"]:"="===f?[f,"TK_EQUALS"]:[f,"TK_OPERATOR"]}return[f,"TK_UNKNOWN"]}var l,n,k,N,j,O,D,a,B,$,da,aa,M,d,P,ia,x,Z,F,T,h,s,y,L,ja,S="";da=["\n","\r","\t"," "];
aa="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");ia="0123456789".split("");M="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::";M+=" <%= <% %> <?= <? ?>";M=M.split(" ");P="continue try throw return var if switch case default for while break function".split(" ");v="Statement";c="ArrayLiteral";W="ForInitializer";R="Conditional";o="Expression";ja={TK_START_EXPR:function(){if(z(),"["===k){if("TK_WORD"===j||
")"===a.last_text){q(a.last_text,P)&&(h=!0);G(o);i();w&&(h=!0);return}a.mode===c&&("["===a.last_text||","===a.last_text&&("]"===O||"}"===O))&&(t||g())}else"for"===a.last_text?G(W):q(a.last_text,["if","while"])?G(R):G(o);";"===a.last_text||"TK_START_BLOCK"===j?g():"TK_END_EXPR"===j||"TK_START_EXPR"===j||"TK_END_BLOCK"===j||"."===a.last_text?F&&g():"TK_WORD"!==j&&"TK_OPERATOR"!==j?h=!0:"function"===a.last_word||"typeof"===a.last_word?r&&(h=!0):(q(a.last_text,P)||"catch"===a.last_text)&&Q&&(h=!0);"("===
k&&("TK_EQUALS"===j||"TK_OPERATOR"===j)&&"ObjectLiteral"!==a.mode&&X();i();w&&(h=!0);"["===k&&(G(c),a.indentation_level+=1);Z&&(Z=!1,a.indentation_level+=1)},TK_END_EXPR:function(){for(;a.mode===v;)K();"]"===k&&a.mode===c&&a.multiline_array&&!t&&g();K();w&&(h=!0);i();a.do_while&&B.mode===R&&(B.mode=o,a.do_block=!1,a.do_while=!1)},TK_START_BLOCK:function(){G("BlockStatement");var d=ga("}")&&"function"===a.last_word&&"TK_END_EXPR"===j;"expand"===u?"TK_OPERATOR"!==j&&(d||"TK_EQUALS"===j||U(a.last_text)&&
"else"!==a.last_text)?h=!0:g():"TK_OPERATOR"!==j&&"TK_START_EXPR"!==j?"TK_START_BLOCK"===j?g():h=!0:B.mode===c&&","===a.last_text&&("}"===O?h=!0:g());i();a.indentation_level+=1},TK_END_BLOCK:function(){for(;a.mode===v;)K();K();var d="TK_START_BLOCK"===j;"expand"===u?d||g():d||(a.mode===c&&t?(t=!1,g(),t=!0):g());i()},TK_WORD:function(){if(z()||F&&!Y(a.mode)&&("TK_OPERATOR"!==j||"--"===a.last_text||"++"===a.last_text)&&"TK_EQUALS"!==j&&(V||"var"!==a.last_text)&&g(),a.do_block&&!a.do_while){if("while"===
k){h=!0;i();h=!0;a.do_while=!0;return}g();a.do_block=!1}if(Z&&U(k)&&(Z=!1),a.if_block&&"else"!==k){for(;a.mode===v;)K();a.if_block=!1}"function"===k?(a.var_line&&"TK_EQUALS"!==j&&(a.var_line_reindented=!0),(E()||";"===a.last_text||"}"===a.last_text)&&"{"!==a.last_text&&a.mode!==c&&(E()||g(!0),E()&&0<n.length-1&&"\n"===n[n.length-2]||g(!0)),"TK_WORD"===j?"get"===a.last_text||"set"===a.last_text||"new"===a.last_text||"return"===a.last_text?h=!0:g():"TK_OPERATOR"===j||"="===a.last_text?h=!0:Y(a.mode)||
g(),i(),a.last_word=k):"case"===k||"default"===k&&a.in_case_statement?(g(),(a.case_body||r)&&(a.indentation_level--,a.case_body=!1),i(),a.in_case=!0,a.in_case_statement=!0):(x="NONE","TK_END_BLOCK"===j?q(k,["else","catch","finally"])?"expand"===u||"end-expand"===u?x="NEWLINE":(x="SPACE",h=!0):x="NEWLINE":"TK_SEMICOLON"===j&&"BlockStatement"===a.mode?x="NEWLINE":"TK_SEMICOLON"===j&&Y(a.mode)?x="SPACE":"TK_STRING"===j?x="NEWLINE":"TK_WORD"===j?x="SPACE":"TK_START_BLOCK"===j?x="NEWLINE":"TK_END_EXPR"===
j&&(h=!0,x="NEWLINE"),q(k,P)&&")"!==a.last_text&&(x="else"===a.last_text?"SPACE":"NEWLINE"),("TK_COMMA"===j||"TK_START_EXPR"===j||"TK_EQUALS"===j||"TK_OPERATOR"===j)&&"ObjectLiteral"!==a.mode&&X(),q(k,["else","catch","finally"])?"TK_END_BLOCK"!==j||"expand"===u||"end-expand"===u?g():(fa(!0),"}"!==n[n.length-1]&&g(),h=!0):"NEWLINE"===x?U(a.last_text)?h=!0:"TK_END_EXPR"!==j?("TK_START_EXPR"!==j||"var"!==k)&&":"!==a.last_text&&("if"===k&&"else"===a.last_word&&"{"!==a.last_text?h=!0:(a.var_line=!1,a.var_line_reindented=
!1,g())):q(k,P)&&")"!==a.last_text&&(a.var_line=!1,a.var_line_reindented=!1,g()):a.mode===c&&","===a.last_text&&"}"===O?g():"SPACE"===x&&(h=!0),i(),a.last_word=k,"var"===k&&(a.var_line=!0,a.var_line_reindented=!1,a.var_line_tainted=!1),"do"===k&&(a.do_block=!0),"if"===k&&(a.if_block=!0))},TK_SEMICOLON:function(){for(;a.mode===v&&!a.if_block;)K();i();a.var_line=!1;a.var_line_reindented=!1;"ObjectLiteral"===a.mode&&(a.mode="BlockStatement")},TK_STRING:function(){z()?h=!0:"TK_WORD"===j?h=!0:"TK_COMMA"===
j||"TK_START_EXPR"===j||"TK_EQUALS"===j||"TK_OPERATOR"===j?"ObjectLiteral"!==a.mode&&X():g();i()},TK_EQUALS:function(){a.var_line&&(a.var_line_tainted=!0);h=!0;i();h=!0},TK_OPERATOR:function(){var c=!0,d=!0;U(a.last_text)?(h=!0,i()):"*"===k&&"TK_DOT"===j&&!O.match(/^\d+$/)?i():":"===k&&a.in_case?(a.case_body=!0,a.indentation_level+=1,i(),g(),a.in_case=!1):"::"===k?i():(F&&("--"===k||"++"===k)&&g(),q(k,["--","++","!"])||q(k,["-","+"])&&(q(j,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||
q(a.last_text,P)||","===a.last_text)?(c=!1,d=!1,";"===a.last_text&&Y(a.mode)&&(c=!0),"TK_WORD"===j&&q(a.last_text,P)&&(c=!0),("BlockStatement"===a.mode||a.mode===v)&&("{"===a.last_text||";"===a.last_text)&&g()):":"===k?0===a.ternary_depth?("BlockStatement"===a.mode&&(a.mode="ObjectLiteral"),c=!1):a.ternary_depth-=1:"?"===k&&(a.ternary_depth+=1),h=h||c,i(),h=d)},TK_COMMA:function(){a.var_line?((Y(a.mode)||"TK_END_BLOCK"===j)&&(a.var_line_tainted=!1),a.var_line&&(a.var_line_reindented=!0),i(),a.var_line_tainted?
(a.var_line_tainted=!1,g()):h=!0):"TK_END_BLOCK"===j&&a.mode!==o?(i(),"ObjectLiteral"===a.mode&&"}"===a.last_text?g():h=!0):"ObjectLiteral"===a.mode?(i(),g()):(i(),h=!0)},TK_BLOCK_COMMENT:function(){var a;a=k;a=a.replace(/\x0d/g,"");for(var c=[],d=a.indexOf("\n");-1!==d;)c.push(a.substring(0,d)),a=a.substring(d+1),d=a.indexOf("\n");a=(a.length&&c.push(a),c);var b;a:{c=a.slice(1);for(d=0;d<c.length;d++)if(b=J(c[d]),"*"!==b.charAt(0)){b=!1;break a}b=!0}if(b){g(!1,!0);i(a[0]);for(b=1;b<a.length;b++)g(!1,
!0),i(" "+J(a[b]))}else{1<a.length?g(!1,!0):"TK_END_BLOCK"===j?g(!1,!0):h=!0;i(a[0]);n.push("\n");for(b=1;b<a.length;b++)n.push(a[b]),n.push("\n")}ga("\n")||g(!1,!0)},TK_INLINE_COMMENT:function(){h=!0;i();h=!0},TK_COMMENT:function(){F?g(!1,!0):fa(!0);h=!0;i();g(!1,!0)},TK_DOT:function(){U(a.last_text)?h=!0:X(")"===a.last_text&&H);E()&&(Z=!0);i()},TK_UNKNOWN:function(){i();"\n"===k[k.length-1]&&g()}};b=b?b:{};A=I=C=H=u=Q=r=w=ba=e=t=V=m=void 0;void 0!==b.space_after_anon_function&&void 0===b.jslint_happy&&
(b.jslint_happy=b.space_after_anon_function);void 0!==b.braces_on_own_line&&(u=b.braces_on_own_line?"expand":"collapse");u=b.brace_style?b.brace_style:u?u:"collapse";"expand-strict"===u&&(u="expand");C=b.indent_size?parseInt(b.indent_size,10):4;I=b.indent_char?b.indent_char:" ";V=void 0===b.preserve_newlines?!0:b.preserve_newlines;H=void 0===b.break_chained_methods?!1:b.break_chained_methods;A=void 0===b.max_preserve_newlines?0:parseInt(b.max_preserve_newlines,10);w=void 0===b.space_in_paren?!1:b.space_in_paren;
r=void 0===b.jslint_happy?!1:b.jslint_happy;t=void 0===b.keep_array_indentation?!1:b.keep_array_indentation;Q=void 0===b.space_before_conditional?!0:b.space_before_conditional;ba=void 0===b.unescape_strings?!1:b.unescape_strings;m=void 0===b.wrap_line_length?0:parseInt(b.wrap_line_length,10);e=void 0===b.e4x?!1:b.e4x;for(D="";0<C;)D+=I,C-=1;for(;p&&(" "===p.charAt(0)||"\t"===p.charAt(0));)S+=p.charAt(0),p=p.substring(1);l=p;s=p.length;j="TK_START_BLOCK";O="";n=[];h=T=!1;L=[];$=[];G("BlockStatement");
d=0;this.beautify=function(){for(var d,f,b;!(d=ha(),k=d[0],N=d[1],"TK_EOF"===N);){if(b=t&&a.mode===c,b)for(f=0;f<y;f+=1)g(!0);else if(F=0<y,A&&y>A&&(y=A),V&&1<y){g();for(f=1;f<y;f+=1)g(!0)}ja[N]();"TK_INLINE_COMMENT"!==N&&"TK_COMMENT"!==N&&"TK_UNKNOWN"!==N&&(O=a.last_text,j=N,a.last_text=k)}return S+n.join("").replace(/[\r\n ]+$/,"")}}"function"==typeof define?define(function(p,b){b.js_beautify=r}):"undefined"!=typeof exports?exports.js_beautify=r:"undefined"!=typeof window?window.js_beautify=r:"undefined"!=
typeof global&&(global.js_beautify=r)})();
(function(){function r(b,m,r,t){var e,p,w,z,Q,u,H,C,I,A,v,m=m||{};p=m.indent_size||4;w=m.indent_char||" ";Q=m.brace_style||"collapse";z=0===m.max_char?Infinity:m.max_char||250;u=m.unformatted||"a span bdo em strong dfn code samp kbd var cite abbr acronym q sub sup tt i b big small u s strike font ins del pre address dt h1 h2 h3 h4 h5 h6".split(" ");e=new function(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=
this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:["\n","\r","\t"," "],single_token:"br input link meta !doctype basefont base area hr wbr param img isindex ?xml embed ?php ? ?=".split(" "),extra_liners:["head","body","/html"],in_array:function(c,b){for(var e=0;e<b.length;e++)if(c===b[e])return!0;return!1}},this.get_content=function(){for(var c="",b=[],e=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(c=this.input.charAt(this.pos),
this.pos++,this.line_char_count++,this.Utils.in_array(c,this.Utils.whitespace))b.length&&(e=!0),this.line_char_count--;else{if(e){if(this.line_char_count>=this.max_char){b.push("\n");for(e=0;e<this.indent_level;e++)b.push(this.indent_string);this.line_char_count=0}else b.push(" "),this.line_char_count++;e=!1}b.push(c)}}return b.length?b.join(""):""},this.get_contents_to=function(c){var b,e;if(this.pos===this.input.length)return["","TK_EOF"];c=RegExp("</"+c+"\\s*>","igm");return c.lastIndex=this.pos,
b=c.exec(this.input),e=b?b.index:this.input.length,this.pos<e&&(this.input.substring(this.pos,e),this.pos=e),""},this.record_tag=function(c){this.tags[c+"count"]?(this.tags[c+"count"]++,this.tags[c+this.tags[c+"count"]]=this.indent_level):(this.tags[c+"count"]=1,this.tags[c+this.tags[c+"count"]]=this.indent_level);this.tags[c+this.tags[c+"count"]+"parent"]=this.tags.parent;this.tags.parent=c+this.tags[c+"count"]},this.retrieve_tag=function(c){if(this.tags[c+"count"]){for(var b=this.tags.parent;b&&
c+this.tags[c+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[c+this.tags[c+"count"]],this.tags.parent=this.tags[b+"parent"]);delete this.tags[c+this.tags[c+"count"]+"parent"];delete this.tags[c+this.tags[c+"count"]];1===this.tags[c+"count"]?delete this.tags[c+"count"]:this.tags[c+"count"]--}},this.get_tag=function(c){var b="",e=[],m="",p=!1,r,J,t=this.pos,v=this.line_char_count,g,w,i,c=void 0!==c?c:!1;do{if(this.pos>=this.input.length)return c&&(this.pos=t,this.line_char_count=
v),e.length?e.join(""):["","TK_EOF"];(b=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(b,this.Utils.whitespace))?(p=!0,this.line_char_count--):(("'"===b||'"'===b)&&(e[1]&&"!"===e[1]||(b+=this.get_unformatted(b),p=!0)),"="===b&&(p=!1),e.length&&"="!==e[e.length-1]&&">"!==b&&p&&(this.line_char_count>=this.max_char?(this.print_newline(!1,e),this.line_char_count=0):(e.push(" "),this.line_char_count++),p=!1),"<"===b&&(r=this.pos-1),e.push(b))}while(">"!==b);return g=
e.join(""),w=-1!==g.indexOf(" ")?g.indexOf(" "):g.indexOf(">"),i=g.substring(1,w).toLowerCase(),"/"===g.charAt(g.length-2)||this.Utils.in_array(i,this.Utils.single_token)?c||(this.tag_type="SINGLE"):"script"===i?c||(this.record_tag(i),this.tag_type="SCRIPT"):"style"===i?c||(this.record_tag(i),this.tag_type="STYLE"):this.is_unformatted(i,u)?(m=this.get_unformatted("</"+i+">",g),e.push(m),0<r&&this.Utils.in_array(this.input.charAt(r-1),this.Utils.whitespace)&&e.splice(0,0,this.input.charAt(r-1)),J=
this.pos-1,this.Utils.in_array(this.input.charAt(J+1),this.Utils.whitespace)&&e.push(this.input.charAt(J+1)),this.tag_type="SINGLE"):"!"===i.charAt(0)?-1!==i.indexOf("[if")?(-1!==g.indexOf("!IE")&&(m=this.get_unformatted("--\>",g),e.push(m)),c||(this.tag_type="START")):-1!==i.indexOf("[endif")?(this.tag_type="END",this.unindent()):-1!==i.indexOf("[cdata[")?(m=this.get_unformatted("]]\>",g),e.push(m),c||(this.tag_type="SINGLE")):(m=this.get_unformatted("--\>",g),e.push(m),this.tag_type="SINGLE"):c||
("/"===i.charAt(0)?(this.retrieve_tag(i.substring(1)),this.tag_type="END"):(this.record_tag(i),this.tag_type="START"),this.Utils.in_array(i,this.Utils.extra_liners)&&this.print_newline(!0,this.output)),c&&(this.pos=t,this.line_char_count=v),e.join("")},this.get_unformatted=function(c,b){if(b&&-1!==b.toLowerCase().indexOf(c))return"";var e="",m="",p=!0;do{if(this.pos>=this.input.length)break;if(e=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(e,this.Utils.whitespace)){if(!p){this.line_char_count--;
continue}if("\n"===e||"\r"===e){m+="\n";this.line_char_count=0;continue}}m+=e;this.line_char_count++;p=!0}while(-1===m.toLowerCase().indexOf(c));return m},this.get_token=function(){var c,b,e;return"TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token?(b=this.last_token.substr(7),c=this.get_contents_to(b),"string"!=typeof c)?c:[c,"TK_"+b]:"CONTENT"===this.current_mode?(c=this.get_content(),"string"!=typeof c?c:[c,"TK_CONTENT"]):"TAG"===this.current_mode?(c=this.get_tag(),"string"!=typeof c?
c:(e="TK_TAG_"+this.tag_type,[c,e])):void 0},this.get_full_indent=function(c){return(c=this.indent_level+c||0,1>c)?"":Array(c+1).join(this.indent_string)},this.is_unformatted=function(c,b){if(!this.Utils.in_array(c,b))return!1;if("a"!==c.toLowerCase()||!this.Utils.in_array("a",b))return!0;var e=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!e||this.Utils.in_array(e,b)?!0:!1},this.printer=function(c,b,e,m,p){this.input=c||"";this.output=[];this.indent_character=b;this.indent_string=
"";this.indent_size=e;this.brace_style=p;this.indent_level=0;this.max_char=m;for(c=this.line_char_count=0;c<this.indent_size;c++)this.indent_string+=this.indent_character;this.print_newline=function(c,b){if(this.line_char_count=0,b&&b.length){if(!c)for(;this.Utils.in_array(b[b.length-1],this.Utils.whitespace);)b.pop();b.push("\n");for(var e=0;e<this.indent_level;e++)b.push(this.indent_string)}};this.print_token=function(b){this.output.push(b)};this.indent=function(){this.indent_level++};this.unindent=
function(){0<this.indent_level&&this.indent_level--}},this};for(e.printer(b,w,p,z,Q);!(H=e.get_token(),e.token_text=H[0],e.token_type=H[1],"TK_EOF"===e.token_type);){switch(e.token_type){case "TK_TAG_START":e.print_newline(!1,e.output);e.print_token(e.token_text);e.indent();e.current_mode="CONTENT";break;case "TK_TAG_STYLE":case "TK_TAG_SCRIPT":e.print_newline(!1,e.output);e.print_token(e.token_text);e.current_mode="CONTENT";break;case "TK_TAG_END":"TK_CONTENT"===e.last_token&&""===e.last_text&&(C=
e.token_text.match(/\w+/)[0],I=e.output[e.output.length-1].match(/<\s*(\w+)/),(null===I||I[1]!==C)&&e.print_newline(!0,e.output));e.print_token(e.token_text);e.current_mode="CONTENT";break;case "TK_TAG_SINGLE":(b=e.token_text.match(/^\s*<([a-z]+)/i))&&e.Utils.in_array(b[1],u)||e.print_newline(!1,e.output);e.print_token(e.token_text);e.current_mode="CONTENT";break;case "TK_CONTENT":""!==e.token_text&&e.print_token(e.token_text);e.current_mode="TAG";break;case "TK_STYLE":case "TK_SCRIPT":""!==e.token_text&&
((e.output.push("\n"),b=e.token_text,v=1,"TK_SCRIPT"===e.token_type?A="function"==typeof r&&r:"TK_STYLE"===e.token_type&&(A="function"==typeof t&&t),"keep"===m.indent_scripts?v=0:"separate"===m.indent_scripts&&(v=-e.indent_level),p=e.get_full_indent(v),A)?b=A(b.replace(/^\s*/,p),m):(w=b.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(e.indent_string).length-1,w=e.get_full_indent(v-w),b=b.replace(/^\s*/,p).replace(/\r\n|\r|\n/g,"\n"+w).replace(/\s*$/,"")),b&&(e.print_token(b),e.print_newline(!0,e.output))),
e.current_mode="TAG"}e.last_token=e.token_type;e.last_text=e.token_text}return e.output.join("")}if("function"==typeof define)define(function(b,m){var p=b("./beautify.js").js_beautify,t=b("./beautify-css.js").css_beautify;m.html_beautify=function(b,m){return r(b,m,p,t)}});else if("undefined"!=typeof exports){var z=require("./beautify.js").js_beautify,p=require("./beautify-css.js").css_beautify;exports.html_beautify=function(b,m){return r(b,m,z,p)}}else"undefined"!=typeof window?window.html_beautify=
function(b,m){return r(b,m,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(b,m){return r(b,m,global.js_beautify,global.css_beautify)})})();